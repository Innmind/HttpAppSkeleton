arguments:
    routes: set<Innmind\Url\PathInterface>
    templates: Innmind\Url\PathInterface

dependencies:
    framework @innmind/http-framework/container.yml:
        routes: $routes
        controllers: $controllers
        authenticator: $authentication.authenticator
        routePatternToAuthenticate: '~/unknown~'

    authentication @innmind/http-authentication/container.yml: []

    templating @innmind/templating/container.yml:
        templates: $templates

expose:
    requestHandler: $requestHandler

services:
    requestHandler stack:
        # - $framework.enforceHttps
        - $framework.authenticate
        - $framework.router

    controllers map<string, Innmind\HttpFramework\Controller>:
        - <index, $controllers.hello>
        - <hello, $controllers.hello>

    controllers:
        hello AppName\Controller\Hello:
            - $templating.engine
